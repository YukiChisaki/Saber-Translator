import{a as z,r as f,c as r,o as S,b as $,e as a,n as g,f as n,g as M,t as p,h as D,i as F,F as k,j as h,T as N,k as l}from"./vue-vendor.DwHUB8Dr.js";const T=["title"],j={class:"custom-select-value",style:{color:"#1f2430"}},G={class:"custom-select-options"},P={class:"custom-select-group-label"},U=["onClick"],W=["onClick"],H=z({__name:"CustomSelect",props:{modelValue:{},options:{default:()=>[]},groups:{default:()=>[]},placeholder:{default:"请选择"},disabled:{type:Boolean,default:!1},title:{default:""}},emits:["update:modelValue","change"],setup(c,{emit:x}){const t=c,w=x,s=f(!1),u=f(null),m=f(null),y=f({}),b=r(()=>t.groups&&t.groups.length>0),B=r(()=>t.groups),E=r(()=>t.options),L=r(()=>b.value?t.groups.flatMap(e=>e.options):t.options),O=r(()=>{const e=L.value.find(v=>v.value===t.modelValue);return e?e.label:t.placeholder});function R(){t.disabled||(s.value?s.value=!1:(C(),s.value=!0))}function C(){if(u.value){const e=u.value.getBoundingClientRect();y.value={top:`${e.bottom+4}px`,left:`${e.left}px`,width:`${e.width}px`,minWidth:"160px"}}}function _(e){w("update:modelValue",e),w("change",e),s.value=!1}function V(e){u.value&&u.value.contains(e.target)||m.value&&m.value.contains(e.target)||(s.value=!1)}function d(){s.value&&C()}return S(()=>{document.addEventListener("click",V),window.addEventListener("scroll",d,!0),window.addEventListener("resize",d)}),$(()=>{document.removeEventListener("click",V),window.removeEventListener("scroll",d,!0),window.removeEventListener("resize",d)}),(e,v)=>(l(),a("div",{class:g(["custom-select",{open:s.value,disabled:c.disabled}]),ref_key:"selectRef",ref:u,style:{color:"#1f2430"}},[n("div",{class:"custom-select-trigger",onClick:R,title:c.title,style:{background:"#fff",color:"#1f2430"}},[n("span",j,p(O.value),1),v[0]||(v[0]=n("span",{class:"custom-select-arrow",style:{color:"#666"}},[n("svg",{viewBox:"0 0 12 12",width:"12",height:"12"},[n("path",{d:"M2 4l4 4 4-4",stroke:"currentColor","stroke-width":"1.5",fill:"none"})])],-1))],8,T),(l(),M(N,{to:"body"},[s.value?(l(),a("div",{key:0,ref_key:"dropdownRef",ref:m,class:"custom-select-dropdown",style:F(y.value)},[n("div",G,[b.value?(l(!0),a(k,{key:0},h(B.value,o=>(l(),a("div",{key:o.label,class:"custom-select-group"},[n("div",P,p(o.label),1),(l(!0),a(k,null,h(o.options,i=>(l(),a("div",{key:i.value,class:g(["custom-select-option",{selected:i.value===c.modelValue}]),onClick:q=>_(i.value)},p(i.label),11,U))),128))]))),128)):(l(!0),a(k,{key:1},h(E.value,o=>(l(),a("div",{key:o.value,class:g(["custom-select-option",{selected:o.value===c.modelValue}]),onClick:i=>_(o.value)},p(o.label),11,W))),128))])],4)):D("",!0)]))],2))}});export{H as _};
